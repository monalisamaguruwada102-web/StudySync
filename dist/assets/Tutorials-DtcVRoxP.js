import{r as d,j as e}from"./vendor-BHBgCXd7.js";import{L as D}from"./Layout-BW6pkOKI.js";import{C as L}from"./Card-FPDh96Dz.js";import{B as u}from"./Button-Cg-uFP-H.js";import{I as x}from"./Input-Bxxkotjn.js";import{M as z}from"./Modal-DoZe7KXC.js";import{u as g}from"./useFirestore-BslRrM8B.js";import{h as p,m as P}from"./index-DJ53ofb6.js";import{e as Y,P as A,as as F,N as E,E as O,u as B,at as j,O as R}from"./icons-BEGX_Ie2.js";const J=()=>{const{data:v,loading:y,refresh:h}=g(p.getAll),{data:m}=g(P.getAll),[w,n]=d.useState(!1),[o,N]=d.useState(""),[i,k]=d.useState(""),[C,T]=d.useState(null),[a,r]=d.useState({url:"",title:"",moduleId:"",topic:"",description:""}),c=t=>{if(!t)return null;const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/,l=t.match(s);return l&&l[2].length===11?l[2]:null},b=t=>`https://img.youtube.com/vi/${t}/hqdefault.jpg`,I=async t=>{t.preventDefault();try{const s=c(a.url);if(!s){alert("Please enter a valid YouTube URL");return}const l={...a,videoId:s,thumbnail:b(s),moduleId:a.moduleId||null,createdAt:new Date().toISOString()};await p.add(l),await h(),n(!1),r({url:"",title:"",moduleId:"",topic:"",description:""})}catch(s){alert("Error: "+s.message)}},S=async t=>{window.confirm("Delete this tutorial?")&&(await p.delete(t),await h())},M=t=>m.find(s=>s.id===t)?.name||"General",f=v.filter(t=>{const s=t.title.toLowerCase().includes(o.toLowerCase())||t.topic.toLowerCase().includes(o.toLowerCase()),l=!i||t.moduleId===i;return s&&l});return e.jsxs(D,{title:"Video Tutorials",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"/",className:"p-2 text-slate-400 hover:text-primary-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all",title:"Back to Dashboard",children:e.jsx(Y,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Video Tutorials"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Curated YouTube learning resources"})]})]}),e.jsxs(u,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[e.jsx(A,{size:20}),e.jsx("span",{children:"Add Tutorial"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(F,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search tutorials...",value:o,onChange:t=>N(t.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 dark:text-slate-100"})]}),e.jsxs("select",{value:i,onChange:t=>k(t.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"All Modules"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[f.map(t=>{const s=t.videoId||c(t.url),l=C===t.id;return e.jsxs(L,{className:"flex flex-col h-full overflow-hidden hover:shadow-lg transition-shadow bg-white dark:bg-slate-900/50",children:[e.jsx("div",{className:"aspect-video bg-black relative group overflow-hidden",children:l?e.jsx("iframe",{className:"w-full h-full",src:`https://www.youtube.com/embed/${s}?autoplay=1&rel=0&origin=${window.location.origin}`,title:t.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsxs("div",{className:"absolute inset-0 cursor-pointer overflow-hidden group/thumb",onClick:()=>T(t.id),children:[e.jsx("img",{src:t.thumbnail||b(s),alt:t.title,className:"w-full h-full object-cover opacity-80 group-hover/thumb:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover/thumb:bg-black/40 transition-colors",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-2xl group-hover/thumb:scale-110 transition-transform duration-300",children:e.jsx(E,{size:24,fill:"white",className:"text-white ml-1"})})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 p-2 bg-black/20 backdrop-blur-md border border-white/10 rounded-xl",children:e.jsx("p",{className:"text-[10px] font-black text-white uppercase tracking-widest text-center opacity-80",children:"Click to Play Tutorial"})})]})}),e.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-[10px] uppercase font-bold text-slate-500 dark:text-slate-400",children:[e.jsx(O,{size:10}),e.jsx("span",{children:M(t.moduleId)})]}),e.jsx(u,{variant:"ghost",onClick:()=>S(t.id),className:"!p-1.5 text-slate-400 hover:text-red-500",children:e.jsx(B,{size:14})})]}),e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2 line-clamp-2",children:t.title}),t.topic&&e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(j,{size:12,className:"text-red-500"}),e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:t.topic})]}),t.description&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-3 flex-1",children:t.description}),e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"mt-4 flex items-center gap-2 text-primary-600 text-xs font-semibold hover:underline",children:[e.jsx(R,{size:12}),"Watch on YouTube"]})]})]},t.id)}),f.length===0&&!y&&e.jsxs("div",{className:"col-span-full text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(j,{size:48,className:"mx-auto text-slate-300 dark:text-slate-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:o||i?"No tutorials found":"No tutorials yet"}),e.jsx("p",{className:"text-slate-400 dark:text-slate-500",children:o||i?"Try adjusting your filters":"Add YouTube tutorials to build your library"})]})]})]}),e.jsx(z,{isOpen:w,onClose:()=>n(!1),title:"Add YouTube Tutorial",footer:e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(u,{variant:"primary",onClick:I,children:"Save Tutorial"})]}),children:e.jsxs("form",{className:"space-y-4",children:[e.jsx(x,{label:"YouTube URL",placeholder:"https://www.youtube.com/watch?v=...",value:a.url,onChange:t=>r({...a,url:t.target.value}),required:!0}),c(a.url)&&e.jsx("div",{className:"aspect-video bg-slate-900 rounded-xl overflow-hidden",children:e.jsx("iframe",{className:"w-full h-full",src:`https://www.youtube.com/embed/${c(a.url)}`,title:"Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsx(x,{label:"Title",placeholder:"e.g. React Hooks Tutorial",value:a.title,onChange:t=>r({...a,title:t.target.value}),required:!0}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Module (Optional)"}),e.jsxs("select",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 dark:text-slate-100",value:a.moduleId,onChange:t=>r({...a,moduleId:t.target.value}),children:[e.jsx("option",{value:"",children:"No Module (General)"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx(x,{label:"Topic",placeholder:"e.g. React Fundamentals",value:a.topic,onChange:t=>r({...a,topic:t.target.value})}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 dark:text-slate-100 min-h-[80px]",placeholder:"Brief notes about this tutorial...",value:a.description,onChange:t=>r({...a,description:t.target.value})})]})]})})]})};export{J as default};
