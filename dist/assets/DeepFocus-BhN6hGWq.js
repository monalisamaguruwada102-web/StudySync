import{r as s,j as e,m as a,A as c}from"./vendor-BHBgCXd7.js";import{u as K}from"./useFirestore-BslRrM8B.js";import{e as V,t as J}from"./index-DJ53ofb6.js";import{e as ee,_ as te,ac as z,ai as C,aj as T,$ as se,ak as ae,al as ie,am as re,an as le,ao as oe,a as ne,B as $,ap as ce,aq as de,N as pe,y as xe,Z as ue}from"./icons-BEGX_Ie2.js";const D={lofi:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",rain:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",white:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"},we=()=>{const{data:I}=K(J.getAll),{timeLeft:v,isRunning:b,isBreak:l,sessionsCompleted:k,selectedTask:f,start:P,pause:F,reset:E,setSelectedTask:_,skipToBreak:W,formatTime:A,progress:d}=V(),[p,R]=s.useState(!1),[me,N]=s.useState(!1),[o,Y]=s.useState(null),[x,B]=s.useState("starfield"),[i,H]=s.useState(!1),[y,O]=s.useState(!0),[S,U]=s.useState("lofi"),[n,L]=s.useState("spotify"),[u,Z]=s.useState(""),[G,m]=s.useState(!1),w=s.useRef(null),g=t=>{const r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&?]*).*/,j=t?.match(r);return j&&j[2].length===11?j[2]:null},M={lofi:"https://open.spotify.com/embed/playlist/37i9dQZF1DWWQRv9oySqS4?utm_source=generator&theme=0",beats:"https://open.spotify.com/embed/playlist/37i9dQZF1DX8UOn96Z99yS?utm_source=generator&theme=0",ambient:"https://open.spotify.com/embed/playlist/37i9dQZF1DWWvH96YI77Y6?utm_source=generator&theme=0"},Q=I.filter(t=>t.status!=="Completed");s.useEffect(()=>{o&&!p?w.current.play().catch(t=>console.log("Audio play failed",t)):w.current.pause()},[o,p]);const q=()=>b?F():P(),X=s.useCallback(()=>{document.fullscreenElement?(document.exitFullscreen(),N(!1)):(document.documentElement.requestFullscreen(),N(!0))},[]),h={starfield:{color:"bg-primary-500",count:40,icon:se},rain:{color:"bg-blue-400",count:60,icon:C},leaves:{color:"bg-green-500",count:30,icon:T}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white relative overflow-hidden",children:[e.jsx("audio",{ref:w,src:o?D[o]:"",loop:!0}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[x==="starfield"&&[...Array(h.starfield.count)].map((t,r)=>e.jsx(a.div,{className:"absolute w-[1px] h-[1px] bg-white rounded-full",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,opacity:Math.random()},animate:{opacity:[.2,1,.2],scale:[1,1.5,1]},transition:{duration:2+Math.random()*4,repeat:1/0,ease:"linear"}},`star-${r}`)),x==="rain"&&[...Array(h.rain.count)].map((t,r)=>e.jsx(a.div,{className:"absolute w-[1px] h-4 bg-blue-400/30",initial:{x:Math.random()*window.innerWidth,y:-20},animate:{y:window.innerHeight+20},transition:{duration:.5+Math.random()*.5,repeat:1/0,ease:"linear",delay:Math.random()*2}},`drop-${r}`)),x==="leaves"&&[...Array(h.leaves.count)].map((t,r)=>e.jsx(a.div,{className:"absolute w-2 h-2 bg-green-500/10 rounded-full",initial:{x:Math.random()*window.innerWidth,y:window.innerHeight+20},animate:{x:[`${Math.random()*100}%`,`${Math.random()*100}%`],y:-20,rotate:360},transition:{duration:5+Math.random()*10,repeat:1/0,ease:"linear"}},`leaf-${r}`))]}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary-600/10 rounded-full blur-[150px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/10 rounded-full blur-[150px] animate-pulse",style:{animationDelay:"1s"}}),e.jsx(c,{children:!i&&e.jsxs(a.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-6 left-6 right-6 flex justify-between items-center z-50 px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors bg-black/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/5",children:[e.jsx(ee,{size:18}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-[10px]",children:"Dashboard"})]}),e.jsxs("a",{href:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors bg-black/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/5",children:[e.jsx(te,{size:18}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-[10px]",children:"End Session"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-black/20 backdrop-blur-md p-1.5 rounded-full border border-white/5",children:[e.jsx("div",{className:"flex items-center border-r border-white/10 pr-2 mr-1",children:Object.keys(D).map(t=>e.jsx("button",{onClick:()=>Y(o===t?null:t),className:`p-2 rounded-full transition-all ${o===t?"bg-primary-500 text-white":"text-slate-400 hover:text-white"}`,title:`Toggle ${t}`,children:t==="lofi"?e.jsx(z,{size:16}):t==="rain"?e.jsx(C,{size:16}):e.jsx(T,{size:16})},t))}),e.jsx("div",{className:"flex items-center border-r border-white/10 pr-2 mr-1",children:Object.entries(h).map(([t,r])=>e.jsx("button",{onClick:()=>B(t),className:`p-2 rounded-full transition-all ${x===t?"bg-purple-500 text-white":"text-slate-400 hover:text-white"}`,title:`Theme: ${t}`,children:e.jsx(r.icon,{size:16})},t))}),e.jsx("button",{onClick:()=>R(!p),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:p?e.jsx(ae,{size:16}):e.jsx(ie,{size:16})}),e.jsx("button",{onClick:X,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(re,{size:16})}),e.jsx("button",{onClick:()=>O(!y),className:`p-2 rounded-full transition-all ${y?"bg-green-500 text-white":"text-slate-400 hover:text-white"}`,title:"Toggle Study Music",children:e.jsx(z,{size:16})}),e.jsx("button",{onClick:()=>{L(n==="spotify"?"youtube":"spotify"),n==="spotify"&&m(!0)},className:`px-3 py-1.5 rounded-full text-[10px] font-bold transition-all ${n==="youtube"?"bg-red-500 text-white":"bg-white/5 text-slate-400 hover:text-white"}`,title:"Toggle between Spotify and YouTube",children:n==="spotify"?"SPOT":"YT"})]})]})}),e.jsx(c,{children:y&&!i&&e.jsxs(a.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"fixed bottom-6 left-6 z-50 w-80 overflow-hidden rounded-3xl border border-white/10 shadow-2xl backdrop-blur-2xl bg-black/40",children:[e.jsxs("div",{className:"p-3 border-b border-white/5 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Study Stream"}),n==="spotify"?e.jsx("div",{className:"flex gap-1",children:Object.keys(M).map(t=>e.jsx("button",{onClick:()=>U(t),className:`px-2 py-1 rounded-lg text-[9px] font-bold uppercase transition-all ${S===t?"bg-primary-500 text-white":"bg-white/5 text-slate-500 hover:text-white"}`,children:t},t))}):e.jsx("div",{className:"flex items-center gap-2",children:G?e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",placeholder:"Paste YouTube URL",value:u,onChange:t=>Z(t.target.value),className:"px-2 py-1 rounded-lg text-[9px] bg-white/10 border border-white/5 text-white placeholder-slate-500 outline-none focus:border-primary-500 w-40",onKeyDown:t=>{t.key==="Enter"&&m(!1)}}),e.jsx("button",{onClick:()=>m(!1),className:"px-2 py-1 bg-primary-500 text-white rounded-lg text-[9px] font-bold hover:bg-primary-600",children:"OK"})]}):e.jsx("button",{onClick:()=>m(!0),className:"px-2 py-1 bg-white/5 text-slate-400 hover:text-white rounded-lg text-[9px] font-bold",children:"Change URL"})})]}),n==="spotify"?e.jsx("iframe",{src:M[S],width:"100%",height:"152",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"opacity-80 hover:opacity-100 transition-opacity"}):g(u)?e.jsx("iframe",{src:`https://www.youtube.com/embed/${g(u)}?autoplay=1&loop=1&playlist=${g(u)}`,width:"100%",height:"152",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"opacity-80 hover:opacity-100 transition-opacity"}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-xs text-slate-400",children:"Paste a YouTube URL above"})})]})}),e.jsx("button",{onClick:()=>H(!i),className:`fixed top-6 right-1/2 translate-x-1/2 z-[60] p-3 rounded-full border transition-all ${i?"bg-primary-600 text-white border-primary-500 shadow-lg shadow-primary-500/20":"bg-black/20 backdrop-blur-md text-slate-400 border-white/10"}`,title:i?"Disable Ghost Mode":"Enable Ghost Mode",children:i?e.jsx(le,{size:20}):e.jsx(oe,{size:20})}),e.jsxs("div",{className:`relative z-10 flex flex-col items-center justify-center min-h-screen px-4 transition-all duration-700 ${i?"scale-110":""}`,children:[!i&&e.jsxs(a.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`flex items-center gap-2 px-6 py-2.5 rounded-full mb-8 backdrop-blur-xl border border-white/10 shadow-2xl ${l?"bg-green-500/10 text-green-400":"bg-primary-500/10 text-primary-400"}`,children:[l?e.jsx(ne,{size:18,className:"animate-bounce"}):e.jsx($,{size:18,className:"animate-pulse"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.3em] font-sans",children:l?"Break Time":"Deep Focus"})]},l?"break":"focus"),e.jsxs("div",{className:"relative mb-12",children:[e.jsxs("svg",{className:"w-[340px] h-[340px] transform -rotate-90",children:[e.jsx("circle",{cx:"170",cy:"170",r:"160",fill:"none",stroke:"rgba(255,255,255,0.03)",strokeWidth:"2"}),e.jsx(a.circle,{cx:"170",cy:"170",r:"160",fill:"none",stroke:l?"rgba(34, 197, 94, 0.4)":"rgba(99, 102, 241, 0.4)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:2*Math.PI*160,strokeDashoffset:2*Math.PI*160*(1-d/100),style:{filter:"blur(15px)"},animate:{strokeDashoffset:2*Math.PI*160*(1-d/100)}}),e.jsx(a.circle,{cx:"170",cy:"170",r:"160",fill:"none",stroke:l?"#22c55e":"#6366f1",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:2*Math.PI*160,strokeDashoffset:2*Math.PI*160*(1-d/100),initial:!1,animate:{strokeDashoffset:2*Math.PI*160*(1-d/100)},transition:{duration:1,ease:"linear"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx(a.span,{className:"text-[100px] font-black tracking-tighter tabular-nums drop-shadow-[0_0_30px_rgba(255,255,255,0.2)]",children:A(v)},v),e.jsx(c,{children:f&&!i&&e.jsx(a.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"text-xs text-slate-400 mt-2 max-w-[200px] text-center uppercase tracking-widest font-bold opacity-60",children:f.title})})]})]}),!i&&e.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[e.jsx("button",{onClick:E,className:"p-4 bg-white/5 hover:bg-white/10 rounded-full transition-all border border-white/5 hover:border-white/20 active:scale-95 text-slate-400",children:e.jsx(ce,{size:20})}),e.jsx(a.button,{onClick:q,whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-24 h-24 rounded-full flex items-center justify-center shadow-[0_0_50px_rgba(99,102,241,0.3)] transition-all ${b?"bg-white/10 border border-white/20":"bg-primary-600 border border-primary-500"}`,children:b?e.jsx(de,{size:36}):e.jsx(pe,{size:36,className:"ml-2"})}),e.jsx("button",{onClick:W,className:"p-4 bg-white/5 hover:bg-white/10 rounded-full transition-all border border-white/5 hover:border-white/20 active:scale-95 text-slate-400",title:"Skip to break",children:e.jsx(xe,{size:20})})]}),e.jsx(c,{children:!i&&e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-md",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-[0.4em] mb-4 text-center font-bold",children:"Priority Mission"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Q.slice(0,4).map(t=>e.jsx("button",{onClick:()=>_(t),className:`px-5 py-2 rounded-full text-[11px] font-bold transition-all border ${f?.id===t.id?"bg-primary-600 text-white border-primary-500 shadow-lg shadow-primary-500/20":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white border-white/5"}`,children:t.title},t.id))})]})}),e.jsx(c,{children:!i&&e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute bottom-12 left-1/2 -translate-x-1/2 flex items-center gap-12 text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:[e.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-black/20 backdrop-blur-md rounded-full border border-white/5",children:[e.jsx(ue,{size:14,className:"text-yellow-500"}),e.jsxs("span",{children:[k," Sprints today"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-black/20 backdrop-blur-md rounded-full border border-white/5",children:[e.jsx($,{size:14,className:"text-primary-500"}),e.jsxs("span",{children:[k*25," Mins Focused"]})]})]})})]})]})};export{we as default};
