import{r as j,j as e}from"./vendor-BHBgCXd7.js";import{L as g}from"./Layout-BW6pkOKI.js";import{C as b}from"./Card-FPDh96Dz.js";import{B as c}from"./Button-Cg-uFP-H.js";import{a2 as f,P as y,a3 as N,u as m,a4 as v}from"./icons-BEGX_Ie2.js";import"./index-DJ53ofb6.js";import"./useFirestore-BslRrM8B.js";const L=()=>{const[l,d]=j.useState([{id:"t1",name:"Users",columns:[{name:"id",type:"INT",primaryKey:!0,autoIncrement:!0},{name:"email",type:"VARCHAR(255)",unique:!0},{name:"created_at",type:"TIMESTAMP",defaultValue:"CURRENT_TIMESTAMP"}]}]),x=()=>{const s={id:Date.now().toString(),name:"NewTable",columns:[{name:"id",type:"INT",primaryKey:!0}]};d([...l,s])},i=(s,t)=>{d(l.map(a=>a.id===s?{...a,...t}:a))},p=s=>{const a=[...l.find(n=>n.id===s).columns,{name:"new_col",type:"VARCHAR(255)"}];i(s,{columns:a})},u=(s,t)=>{const n=[...l.find(r=>r.id===s).columns];n.splice(t,1),i(s,{columns:n})},o=()=>{let s=`-- Generated by StudySync SQL Visualizer

`;return l.forEach(t=>{s+=`CREATE TABLE ${t.name} (
`,t.columns.forEach((a,n)=>{let r=`  ${a.name} ${a.type}`;a.primaryKey&&(r+=" PRIMARY KEY"),a.autoIncrement&&(r+=" AUTOINCREMENT"),a.unique&&(r+=" UNIQUE"),a.defaultValue&&(r+=` DEFAULT ${a.defaultValue}`),s+=r+(n===t.columns.length-1?"":",")+`
`}),s+=`);

`}),s},h=()=>{navigator.clipboard.writeText(o()),alert("SQL copied to clipboard!")};return e.jsxs(g,{title:"SQL Schema Visualizer",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Database Architect"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Design your schema visually and generate production-ready SQL."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{variant:"secondary",onClick:h,className:"flex items-center gap-2",children:[e.jsx(f,{size:18}),e.jsx("span",{children:"Copy SQL"})]}),e.jsxs(c,{onClick:x,className:"flex items-center gap-2",children:[e.jsx(y,{size:20}),e.jsx("span",{children:"Add Table"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:l.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{size:18,className:"text-primary-500"}),e.jsx("input",{className:"bg-transparent font-bold text-slate-800 dark:text-slate-100 outline-none focus:ring-1 focus:ring-primary-500/20 rounded px-1 w-32",value:s.name,onChange:t=>i(s.id,{name:t.target.value})})]}),e.jsx("button",{onClick:()=>d(l.filter(t=>t.id!==s.id)),className:"text-slate-300 hover:text-red-500",children:e.jsx(m,{size:16})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[s.columns.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("input",{className:"flex-1 bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded px-2 py-1 outline-none text-slate-700 dark:text-slate-300",value:t.name,onChange:n=>{const r=[...s.columns];r[a].name=n.target.value,i(s.id,{columns:r})}}),e.jsxs("select",{className:"w-24 bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded px-1 py-1 outline-none text-slate-500",value:t.type,onChange:n=>{const r=[...s.columns];r[a].type=n.target.value,i(s.id,{columns:r})},children:[e.jsx("option",{children:"INT"}),e.jsx("option",{children:"VARCHAR(255)"}),e.jsx("option",{children:"TEXT"}),e.jsx("option",{children:"BOOLEAN"}),e.jsx("option",{children:"TIMESTAMP"}),e.jsx("option",{children:"DECIMAL(10,2)"})]}),e.jsx("button",{onClick:()=>u(s.id,a),className:"text-slate-300 hover:text-red-400",children:e.jsx(m,{size:14})})]},a)),e.jsx("button",{onClick:()=>p(s.id),className:"w-full py-2 border border-dashed border-slate-200 dark:border-slate-700 rounded-xl text-[10px] uppercase font-bold text-slate-400 hover:border-primary-500 hover:text-primary-500 transition-all",children:"+ Add Column"})]})]},s.id))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(b,{title:"Generated SQL Script",HeaderAction:e.jsx(v,{size:18,className:"text-slate-400"}),children:[e.jsx("div",{className:"bg-slate-900 rounded-2xl p-4 font-mono text-[11px] text-slate-100 min-h-[400px] shadow-inner overflow-x-auto",children:e.jsx("pre",{children:e.jsx("code",{children:o()})})}),e.jsxs("div",{className:"mt-4 p-4 bg-primary-50 dark:bg-primary-900/10 rounded-2xl border border-primary-100 dark:border-primary-800",children:[e.jsx("h4",{className:"text-xs font-black text-primary-700 dark:text-primary-300 uppercase tracking-widest mb-2",children:"Pro Tip"}),e.jsxs("p",{className:"text-[11px] text-slate-600 dark:text-slate-400 leading-relaxed",children:["Always include an ",e.jsx("strong",{children:"id"})," field with ",e.jsx("strong",{children:"PRIMARY KEY"})," for efficient indexing and relationship mapping."]})]})]})})]})]})};export{L as default};
